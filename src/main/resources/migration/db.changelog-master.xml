<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <include file="migration/tables/001.users-table.sql" />
    <include file="migration/tables/002.research-core-tables.sql" />
    <include file="migration/tables/003.subjects-tables.sql" />
    <include file="migration/tables/004.research-line-tables.sql" />
    <include file="migration/tables/005.execution-and-artifacts.sql" />
    <include file="migration/tables/006.objectives-and-reports.sql" />
    <include file="migration/tables/007.adverse-events-and-audit.sql" />

    <!-- ChangeSet for ALL the VIEWS to make sure that data structure is not broken  -->
    <changeSet id="views-observer" author="Roman Lukashenko" runAlways="true">
        <sqlFile path="migration/view/vw_research_overview_item.sql"/>
    </changeSet>

    <!-- Post-migration cleanup to deallocate prepared statements -->
    <changeSet id="post-migration-cleanup-always" author="Roman Lukashenko" runAlways="true">
        <sql>DEALLOCATE ALL;</sql>
    </changeSet>

</databaseChangeLog>